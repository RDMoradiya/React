<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Async & Await</title>
    <link rel="icon" href="logo.png" />
    <!-- bootstrap CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
  </head>
  <!-- Async :-
        !-> The keyword async before a function makes the function return a promise. -->

  <script>
    // let getData = async function () {};
    // let getData = async () => {};

    async function getData() {
      return `<h1>Hello World</h1>
              <p> Raj </p>
              <p> Moradiya </p> `;
    }
    getData().then((result) => {
      document.write(result + "<hr>");
    });
  </script>

  <!-- Await :-
        !-> The await keyword can only be used inside an async function.
        !-> The await keyword makes the function pause the execution and wait for a resolved promise before it continues -->

  <script>
    let print = async () => {
      await document.write(
        "<b>2 : Hello World</b>" + " => " + "await function use" + "<br>"
      );
      document.write("3 : Hello World" + "<br>");
      document.write("4 : Hello World" + "<hr>");
    };
    document.write("1 : Hello World" + "<br>");
    print();
    document.write("5 : Hello World" + "<br>");
  </script>

  <!-- example - 1 -->

  <script>
    async function task() {
      console.log("2 : mess");

      // return await fetch("https://jsonplaceholder.typicode.com/users")
      let response = await fetch("https://jsonplaceholder.typicode.com/users")
        .then((Result) => {
          return Result.json();
        })
        .then((prom) => {
          let details = document.querySelector("#details");

          for (let info of prom) {
            let html = `
              <div class="col-3 p-4 border border-1 border-danger g-3 my-2" >
                  <h4>ID : ${info.id} </h4>
                  <p>NAME : ${info.name} </p>
                  <p>USERNAME : ${info.username} </p>
                  <p>EMAIL : ${info.email} </p>
                  <p>ZIPCODE : ${info.address.zipcode} </p>
              </div>
        `;
            details.insertAdjacentHTML("beforeend", html);
          }
          console.log(prom);
          // console.log("3 : mess");
        });
      console.log("3 : mess");
    }
    console.log("1 : mess");

    task();

    console.log("4 : mess");
  </script>
  <body>
    <div class="container-fluid">
      <div class="row" id="details"></div>
    </div>
  </body>
</html>
